webpackJsonp([8],{vfdm:function(n,a){n.exports={slug:"2018-03-16-webpack-loader",date:"2018-03-16",title:"オレオレ webpack loader 作って nuxt に導入するメモ",content:'<p>このブログを作るのにちょっとした webpack loader を書いて nuxt に適用したので、そのメモ。</p>\n<h2>メモ</h2>\n<ul>\n<li><a href="https://webpack.js.org/contribute/writing-a-loader/">基本の書き方</a></li>\n<li>node で動かすことに留意する\n<ul>\n<li>import/export で書かれてるが、 node でv9 でもまだ <code>--experimental-modules</code> 立てないと動かないので、 <code>module.exports</code> と <code>require</code> で書く等。</li>\n</ul>\n</li>\n<li>雛形を作成して、読み込まれることを確認してから先に進む\n<ul>\n<li>単に source を受け取って console.log するだけのやつでもいい</li>\n</ul>\n</li>\n<li>loader は hot reload 対象外\n<ul>\n<li>当たり前だけど。 nuxt 起動し直しが必要</li>\n</ul>\n</li>\n</ul>\n<h2>nuxt.config.js</h2>\n<p><a href="https://nuxtjs.org/api/configuration-build/#extend">build - extend</a> で webpack の設定を拡張してやる必要がある。</p>\n<p>オレオレ hoge-loader を loaders において、下記のような設定を書く</p>\n<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  build<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token function">extend</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      config<span class="token punctuation">.</span>resolveLoader<span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'loaders\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n<p>あとは利用側で <code>import fuga from \'hoge-loader!fuga.js\'</code> という形で利用できる。</p>\n<hr>\n<p>メンテされてない loader 使うくらいならサクッと作ったほうがいい説ある。<br>\nってそれ gulp でも通った道や……。</p>\n'}}});